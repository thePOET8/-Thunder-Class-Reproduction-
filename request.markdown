# 2020 C++大作业——“雷课堂”(Thunder Class)
针对新型冠状病毒感染肺炎疫情对高校正常开学和课堂教学造成的影响，教 育部要求 2020 年春季学期延期开学，以阻断疫情向校园蔓延，并印发了《关于 在疫情防控期间做好普通高等学校在线教学组织与管理工作的指导意见》，提到 “依托各级各类在线课程平台、校内网络学习空间等，积极开展线上授课和线上 学习等在线教学活动，保证疫情防控期间教学进度和教学质量。”
<br/><br/>
清华大学积极响应教育部的号召和要求，以“雨课堂”为主、腾讯会议和 ZOOM 等网络会议软件为辅，2019-2020 春季学期共实现了 4422 门次课程的网 络教学。“雨课堂”以 Office 插件形式，实现一对多的 PPT 展示、在线答题、弹幕、 随机点名等师生互动的交互式教学，并可以汇总关键词、懂/不懂、签到、在线 时长、注意力集中程度、答题情况等群体和个体统计数据，具有独特优势。网络 会议软件在多方语音互动、快速屏幕/窗口共享切换等方面特色突出，但教学信 息统计功能缺失。
<br/><br/>
在本学期 C++课程开始前的系统测试中，有同学建议自主开发一款集合雨 课堂和网络会议优点于一身的网络教学软件(有截图为证，但为了保护这位同学 的人身安全和隐私，就不放图了)。任课教师和助教在充分讨论基础上，决定采 纳这一具有智慧及主动学习特色的建设性意见，并以“雷课堂” (Thunder Class) 为题，设计了本学期的大作业。
<br/><br/>

## 1. 基本功能要求(\*代表教师用户具有的功能)

### 1.1 用户登陆
根据用户名密码登陆软件，三次密码输入错误自动退出雷课堂软
件。根据账号类型(教师/学生)不同自动切换功能。必须包含一个账户名为 Admin，密码为 Admin 的管理员账号，此账号仅能用于管理教师和学生账户的增删改。(不需考虑如何在增删改用户和密码后通知该账户持有者。毕竟
我们有微信)
### 1.2 语音设备选择和切换
教师开始上课前/学生加入课堂前，应可自主选择语音
输入和播放设备;并可在课程持续期间随时切换语音设备。
### 1.3 共享屏幕\*
教师在上课过程中，可共享整个屏幕或某个窗口内容给全体同学 (包括但不限于 PPT 和代码编辑器);可随时切换共享源、停止或再次开始
共享屏幕。
### 1.4 语音直播\*
开始上课时，自动开始语音采集，并实时的通过网络传送给所有
已经连接到本课堂的学生。
### 1.5 随机语音提问\*
教师可一键(单次鼠标点击或单次快捷键)在全体在线同学
中随机选择一名。被选中的同学的麦克风将被自动打开，并发送给教师和其
余全体同学。教师可再次一键结束此次语音提问。
### 1.6 在线发题\*
教师可在上课过程中多次动态编辑并向全体同学发送单选/多选
题，并实时统计个选项选择人数、选择每个选项的同学名单、每位同学作答
的耗时。教师亦可随时中断发题，但仍需统计上述信息
### 1.7 在线答题
学生在收到试题时，应弹出置顶窗口显示题目和选项，并开始计
时。直到学生提交答案或教师中断发题时，才关闭窗口，并将答案和耗时反
馈给教师。
### 1.8 学生签到
进入课堂时自动签到。而教师可收到何时学生签到和退出课堂的
信息。(多次签到和退出均需记录)
### 1.9 注意力
课堂持续期间，学生签到后，“雷课堂软件处于焦点窗口状态的时长”
与学生在线时长的百分比，将在下课时反馈给教师做记录。
### 1.10 上课/下课\*
上课时，教师端开始随时接收用户登录请求，并根据用户名密 码自动决定是否允许学生端连入。一旦允许连入，之后的语音、屏幕共享 均、语音提问、在线答题信息均会传送给该同学。教师下课时，应在接收了 全体在线同学的注意力数据后再断开与学生端的网络连接，之后自动生成 全部课上统计信息，以文件形式存储并在教师端界面上显示。
### 1.11 进入课堂/退出课堂
在输入了教师端的 IP 地址(或 IP 和端口号)后，连 接到教师端，实现进入课堂功能并开始网络数据通信。如在 30 秒内不能连 接到教师端，应弹出提示。在主动退出课堂或直接关闭了软件时，应向教 师端发送注意力数据，再断开与教师端的网络连接。(不需考虑如何获取教 师端 IP 和端口号，毕竟我们有课程微信群)
1.12 麦克风管制
除非收到教师语音提问，否则麦克风时刻处于静音状态。

## 2. 系统设计要求

### 2.1 
除程序主函数(广义的主函数，可能是 WinMain 或其他)和必要的友元函数 (要在报告和程序中额外说明每个友元函数的不可替代性:为什么一定要用 友元才能实现)外，不允许出现任何一个非类成员函数。

### 2.2 
任何不改变对象状态(不改写自身对象数据成员值)的成员函数均需显示标注 const。

### 2.3 
全部类分为三大类:界面类(开发环境提供的、与图形界面相关的类)、业务 流程类(仅有一个，用于和界面实现耦合)、核心类(其余全部类)。仅有界 面类可以用开发环境自动生成代码框架。仅有业务流程类可以包含开发环境 提供类的指针。核心类只允许使用 C++11 支持的标准语法、STL、操作系统 API。(**此条为强烈建议，未实现界面类和核心类分离将严重影响成绩**)

### 2.4 
全部语音、屏幕共享、网络传输等需使用操作系统 API 的相关操作，均需封 装成类代码，再被其他核心类使用。不允许其他核心类直接调用操作系统 API。

### 2.5 
除界面类外，任何第三方类库的使用，只能处于源代码级别，不可依赖 lib/so/dylib 文件(静态库也不可以)和 DLL 文件。全部第三方类库需在报告 和程序中著名来源和版权信息。

## 3. 代码与发布要求

### 3.1 
通过开发环境自动生成的界面类代码，全部数据成员和成员函数需在类声明 时加以注释，函数体内的必要步骤要加以注释。

### 3.2 
其他全部类代码的数据成员和成员函数的声明和实现均需加以注释，成员函 数的必要步骤要加以注释。

### 3.3 
其他代码规范需遵循学堂发布的编码规范要求。

### 3.4 
发布的程序必须是可运行于Win10/Macos10.14操作系统下的32bit或64bit
的 Release 版本:不依赖于具体开发环境的依赖库、不依赖操作系统驱动或 功能模块配置、仅仅软件自身可执行文件和必要的数据库库文件(如使用了 数据库)。在不可避免的依赖数据库驱动时，应提供自动化安装包:运行安装 包即可自动安装和配置数据库驱动、安装软件本身的可执行文件和数据库库 文件。特别地:只要可执行文件和数据库库文件的相对路径不变，数据库驱 动、可执行文件和数据库库文件安装的绝对路径不可影响软件正常运行。 (Mac os 也仅可用 C++编程，不可使用 Object-C、Swift 或其他语言)

## 4. 报告要求

### 4.1 
报告应至少包括需求分析、类与类结构设计、界面设计、测试与排错、总结 与体会 5 个部分。

### 4.2 需求分析侧重描述
如何从现实世界提取对象;如何分析功能之间的耦合与 拆分;哪些功能该归属于哪些对象;如何将对象抽象为类。

### 4.3 类与类结构设计侧重描述
有哪些类;每个类存在的必要性和功能性(封装); 类之间如何构成派生或包含关系;具有同一基类的一些列类的功能分配(继 承与多态);其他多态设计(函数重载、模板等)。此部分必须使用 UML 配合 文字描述。

### 4.4 界面设计侧重描述
如何从实用性和便捷性角度设计图形界面;界面与业务 流程如何耦合;如何实现界面与功能的解耦。

### 4.5 测试与排错侧重描述
完成大作业全过程中，遇到的典型错误的表现形式、 定位错误点的判断方法或测试手段;从软件鲁棒性角度实施了那些测试，如 何设计测试计划和安排测试用例。

### 4.6 总结与体会侧重描述
自己大作业的得意之处、神来之笔、闪光的设计思想; 实际实现系统与最初理想目标的差异与不足;通过大作业深入理解了哪些知 识点，锻炼了哪些技能、技巧、技术、思维(举实例说明，不可泛泛而谈); 为帮助下届学弟学妹深入掌握 C++语言与实践技能的建设性意见和建议(特 别是好的大作业可能选题);喜闻乐见及盼望已久的吐槽。

## 5. 大作业分数构成与比例

### 5.1 基本功能分 20%。
以答辩现场测试记录为依据。只考虑功能是否实现、是否 鲁棒，不考虑背后的实现机制。

### 5.2 系统设计分 20%。
以 code review 和报告为依据。不满足本文第 2 部分要求 的:1 点扣 2 分。

### 5.3 代码规范分 20%。
以 code review 和现场测试为依据，每有 1 处违反代码规范要求，扣 1 分，扣完为止。

### 5.4 Release 分 10%。
不满足本文第 3 部分 Release 要求的，不得分。

### 5.5 报告质量分 20%。
以报告编写详实和细致程度为依据，来自多名报告评阅人主观打分的平均值。类及类结构部分的描述可读性、细节丰富性对报告质量 分有贡献，但类与类结构的设计合理性在系统设计分中体现，不计入报告质 量分。

### 5.6 答辩表现分 10%。
以答辩现场测试记录为依据。

### 5.7 额外功能加分不超过 10%。
完成任何超出基本功能要求的、对软件实用性有贡献的额外功能(如摄像头直播、画中画等)，最多可获得 10%加分。(加分后总分不会超过 100%)

### 5.8 优秀界面设计加分不超过 5%。
由多名评阅人投票推选不超过总选课人数 10% 的优秀界面设计，根据多名评阅人打分平均分进行加分。(加分后总分不会超过 100%)

## 6. 作业提交

### 6.1 
第 14 周周日前，会通过网络学堂公布全体同学用于答辩和测试的账号、密 码。请各位同学提前录入到自己的数据库文件中，便于大作业答辩时，任何 有围观意愿的同学。

### 6.2 
第 16 周周日 24 点为作业提交最后截止时间，以网络学堂计时为准，不接受 任何理由、任何方式的补交。**请充分考虑网络拥堵、本机时间与网络学堂时间不一致等一切可能出现的负面因素，尽早完成并提交大作业。**

### 6.3 
提交的内容包括:全部源代码、数据库文件、已在本机编译好的可执行文件 (或安装包)、报告、源代码开发环境版本的说明文件。

## 7、答辩安排

### 7.1 
第 17 周周六和周日，采用网络答辩形式，排序名单后续公布。

### 7.2 答辩准备
第 17 周周三前，会通过网络学堂提前发布全体同学提交的可执 行文件(或安装包)和数据库文件，且数据库文件已包含了每位同学的账号
密码。

### 7.3 答辩过程包括
(1)对比双发持有可执行文件的 MD5 码(MD5 码工具另行
发布);
(2)评委用已提交可执行文件以教师账号登录，答辩人以学生账号登 陆，其他围观同学以各自学生账号登陆，在有围观意愿的同学见证下，答辩 人将使用自己提交可执行文件进行答辩和现场测试。与此同时，助教会用微 信与答辩人实时视频，记录答辩人端软件的执行情况。

### 7.4 特别提醒
请在提交作业前进行充分的远程测试和多机连入压力测试。
